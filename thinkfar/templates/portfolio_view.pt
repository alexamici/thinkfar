<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="main.macros['main']">
  <div metal:fill-slot="content">
    <div id="content">
      <div class="post">
        <h1 class="title">think beyond the end of your nose</h1>
        <h2 tal:content="'Portfolio: %s at %s' % (portfolio.name, date.isoformat())">Portfolio</h2>
        <table>
          <tr tal:repeat="asset portfolio.assets">
            <td>
              <a href="${request.application_url}/asset/${asset.id}" title="${asset.identity}">${asset.name}</a>
            </td>
            <td>${asset.balance(date)}</td>
            <td>${asset.cumulative_buy(date)}</td>
            <td>${asset.cumulative_sell(date)}</td>
            <td>${asset.cumulative_sell(date)-asset.cumulative_buy(date)}</td>
          </tr>
          <tr>
            <td>Total</td>
            <td></td>
            <td>${portfolio.cumulative_buy(date)}</td>
            <td>${portfolio.cumulative_sell(date)}</td>
            <td>${portfolio.cumulative_sell(date)-portfolio.cumulative_buy(date)}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</html>
